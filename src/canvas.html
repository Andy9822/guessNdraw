<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="utf-8">
  <title></title>
</head>
<style media="screen">
  html {
    width: 50%;
    padding: 10px;
    text-align: center;
    margin: auto;

  }

  .canvas-container {
    border: 3px solid #caccd1;
  }
</style>

<body>
  <h1>Canvas dos guri</h1>
  <canvas class="canvas-container" width="640" height="320"></canvas>
</body>
<script type="text/javascript">
  // create canvas element and append it to document body
  let canvas = document.getElementsByClassName("canvas-container")[0]
  console.log(canvas);


  // get canvas 2D context and set him correct size
  let ctx = canvas.getContext('2d');
  // resize();

  // last known position
  let pos = { x: 0, y: 0 };

  // gets the size of the element and its position relative to the viewport.
  let rect = canvas.getBoundingClient();

  window.addEventListener('resize', resize);
  canvas.addEventListener('mousemove', draw);
  document.addEventListener('mousedown', setPosition);
  // canvas.addEventListener('mouseenter', setPosition);

  // new position from mouse event
  function setPosition(e) {
    pos.x = e.clientX - rect.left;
    pos.y = e.clientY - rect.top;
  }

  // recalulcate canvas limits
  function resize() {
    rect = canvas.getBoundingClientRect();
  }

  function draw(e) {
    // mouse left button must be pressed
    if (e.buttons !== 1) return;
    ctx.beginPath(); // begin

    ctx.lineWidth = 5;
    ctx.lineCap = 'round';

    // ctx.strokeStyle = '#0099e5'; // Blue
    ctx.strokeStyle = '#ff4c4c'; // Red

    ctx.moveTo(pos.x, pos.y); // from
    setPosition(e);
    ctx.lineTo(pos.x, pos.y); // to

    ctx.stroke(); // draw it!
  }
</script>
<script type="module">
  import io from 'socket.io-client';
  const socket = io('http://localhost');
</script>

</html>